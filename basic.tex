\usepackage{ifxetex,ifluatex}\newif\ifxetexorluatex
\ifxetex\xetexorluatextrue\else
\ifluatex\xetexorluatextrue\else
\xetexorluatexfalse\fi\fi

\def\kindlegeometry{\usepackage[papersize={108mm,144mm},margin=2mm,bottom=4mm]{geometry}}

\ifdefined\tmnofont
\else
\ifxetexorluatex
    \usepackage{polyglossia}
    \setmainlanguage{czech}
    \usepackage{fontspec}
    \ifxetex
    \setmainfont[Mapping=tex-text]{Latin Modern Roman}
    \else
    \setmainfont[Ligatures=TeX]{Latin Modern Roman}[
    SmallCapsFont={Latin Modern Roman Caps}]
    \fi
\else
    \usepackage{lmodern}
    \usepackage[T1]{fontenc}
    \usepackage[utf8]{inputenc}
    \usepackage[czech]{babel}
\fi\fi

\usepackage{microtype}
\usepackage[all]{nowidow}

\usepackage{epigraph}
\usepackage{graphicx}
\usepackage{amssymb}

\usepackage[ampersand]{easylist}
\def\olist{\begin{easylist}[enumerate]}
\def\ulist{\begin{easylist}[itemize]}
\def\elist{\end{easylist}}

%\hypersetup{breaklinks=true}
%\hypersetup{pdftitle={\ThesisTitle}}
%\hypersetup{pdfauthor={\ThesisAuthor}}
%\hypersetup{pdfkeywords=\Keywords}
%\hypersetup{allcolors=blue}

\ifluatex
%\usepackage[nosingleletter,rivers]{impnattypo}
\usepackage{cstypo}
\cstypoSingleLetterEnable
\cstypoALetterEnable
\fi

\ifxetex
\else
\usepackage{filemod}
\fi

\newcommand*{\tmdate}[1]{
\ifxetex
\today
\else
\Filemodtoday{#1}
\fi
}

\newcommand{\tmBiber}[1]{
	\usepackage[backend=biber,style=verbose-ibid]{biblatex}
	\addbibresource{#1}
	\DefineBibliographyStrings{czech}{ibidem={tamtéž}, references={Citovaná literatura}}
	\renewbibmacro*{date}{%
	  \printdate
	  \iffieldundef{origyear}{%
	  }{%
	    \setunit*{\addspace}%
	    \printtext[brackets]{\printorigdate}%
	  }%
	}
}

\newcommand{\Hair}{\ifmmode\mskip1mu\else\kern0.08em\fi}
		\newcommand{\spoj}{\discretionary{-}{-}{-}}

\ifdefined\tmTodoOn
\usepackage[backgroundcolor=green]{todonotes}
\else
\usepackage[obeyDraft, backgroundcolor=green]{todonotes}
\fi
\newcommand{\td}[1]{\todo[inline]{#1}}
\newcommand{\tda}[1]{\todo[backgroundcolor=blue!50,inline]{#1}}

\newcommand{\motto}[4]{
	\renewcommand{\textflush}{flushepinormal}
	\setlength{\epigraphwidth}{#1}
	\setlength{\epigraphrule}{0pt}
	\epigraph{\textit{#2}}{\emph{-- #3\ifthenelse{\equal{#4}{}}{}{,\emph{ #4}}}}
	}

\newcommand{\tmFancyhdr}[2]{
\usepackage{fancyhdr}
\pagestyle{fancy}
\setlength{\headheight}{16pt} 
\lhead{#1}
\rhead{#2}
}
